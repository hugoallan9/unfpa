{
    "contents" : "library(foreign, pos=15)\nlibrary(dplyr)\nlibrary(survey)\nenei14 <- read.spss(\"/mnt/datos/GitHub/unfpa/Bases/personas2014.sav\", \n                    use.value.labels=TRUE, max.value.labels=Inf, to.data.frame=TRUE)\ncolnames(enei14) <- tolower(colnames(enei14))\n\nenei4 <- tbl_df(enei14)\n#encuesta4 <- svydesign(ids = ~1, data= enei4, weights = ~factor_expansion)\n\nenei13 <- read.spss(\"/mnt/datos/GitHub/unfpa/Bases/personas2013.sav\", \n                    use.value.labels=TRUE, max.value.labels=Inf, to.data.frame=TRUE)\ncolnames(enei13) <- tolower(colnames(enei13))\n\nenei3 <- tbl_df(enei13)\n\nenei12 <- read.spss(\"/mnt/datos/GitHub/unfpa/Bases/personas2012.sav\", \n                    use.value.labels=TRUE, max.value.labels=Inf, to.data.frame=TRUE)\ncolnames(enei12) <- tolower(colnames(enei12))\n\nenei2 <- tbl_df(enei12)\n\nenei <- tbl_df(enei14)\nenei11 <- read.spss(\"/mnt/datos/GitHub/unfpa/Bases/pesonas2011.sav\", \n                    use.value.labels=TRUE, max.value.labels=Inf, to.data.frame=TRUE)\ncolnames(enei11) <- tolower(colnames(enei11))\n\nenei1 <- tbl_df(enei11)\n\n########COMENZANDO A HACER LAS TABLAS#####################\n#ANIOS###\nmakeYears <- function(year, longitud = 4){\n  anios <- c()\n  for (x in longitud:0){\n    anios <- c(anios,year - x) \n  }\n  return(anios)\n}\n\n\nx = c()\nalfa <- enei1 %>%\n  select(p03a01,edad,factor_exp)%>%\n  filter(p03a01 == 1, edad >14) %>%\n  na.omit()%>%\n  count(wt=factor_exp) \n\ntotal <- enei1 %>%\n  select(p03a01,edad,factor_exp)%>%\n  filter(edad >14) %>%\n  na.omit()%>%\n  count(wt=factor_exp)\n\nx = c(x,as.numeric(alfa/total*100))\n\nalfa <- enei2 %>%\n  select(p03a01, ppa03,factor)%>%\n  filter(p03a01 == \"Si\", ppa03 >14) %>%\n  na.omit()%>%\n  count(wt=factor)\n\ntotal <- enei2 %>%\n  select(p03a01,ppa03,factor)%>%\n  filter(ppa03 >14) %>%\n  na.omit()%>%\n  count(wt=factor)\n\nx = c(x,as.numeric(alfa/total*100))\n\nalfa <- enei3 %>%\n  select(p03a01, ppa03,factor)%>%\n  filter(p03a01 == \"Si\", ppa03 >14) %>%\n  na.omit()%>%\n  count(wt=factor)\n\ntotal <- enei3 %>%\n  select(p03a01,ppa03,factor)%>%\n  filter(ppa03 >14) %>%\n  na.omit()%>%\n  count(wt=factor)\n\nx = c(x,as.numeric(alfa/total*100))\n\nalfa <- enei4 %>%\n  select(p03a01, ppa03,factor_expansion)%>%\n  filter(p03a01 == \"Si\", ppa03 >14) %>%\n  na.omit()%>%\n  count(wt=factor_expansion)\n\ntotal <- enei4 %>%\n  select(p03a01,ppa03,factor_expansion)%>%\n  filter(ppa03 >14) %>%\n  na.omit()%>%\n  count(wt=factor_expansion)\n\nx = c(x,as.numeric(alfa/total*100))\n\ndf01 <- data.frame(makeYears(2014,3),x )\nnames(df01) <- c(\"x\",\"y\")\n\n########### 2 #################\ntotalHombres <- enei4 %>%\n  select(p03a01,ppa03,ppa02,factor_expansion)%>%\n  filter(ppa03 >14,ppa02 == \"Hombre\") %>%\n  na.omit()%>%\n  count(wt=factor_expansion)\n\ntotalMujeres <- enei4 %>%\n  select(p03a01,ppa03,ppa02,factor_expansion)%>%\n  filter(ppa03 >14,ppa02 == \"Mujer\") %>%\n  na.omit()%>%\n  count(wt=factor_expansion)\n\nx = rbind(as.numeric(totalHombres), as.numeric(totalMujeres))\n\ndf02 <- enei4 %>%\n  select(ppa02,ppa03,p03a01,factor_expansion)%>%\n  filter(ppa03 >14, p03a01 == \"Si\") %>%\n  group_by(ppa02)%>%\n  summarise(conteo = sum(factor_expansion))%>%\n  mutate(conteo = conteo/x*100)\n\n\n\nnames(df02) <- c(\"x\",\"y\")\n\n############03###########\ngrupo1 <- enei4 %>%\n  select(ppa03, p03a01)%>%\n  filter(ppa03>=14, p03a01 == \"Si\")%>%\n  group_by(ppa03)%>%\n  summarise(y = n())%>%\n  filter(ppa03 >=14, ppa03 <=29)%>%\n  summarise( y=sum(y)) %>%\n  summarise(x = \"15-29\",y = y / (enei4 %>% select(ppa03, p03a01)%>%\n                     filter(ppa03 >=14, ppa03 <=29)%>%\n                     na.omit()%>%\n                     nrow()) *100)\n\ngrupo2 <- enei4 %>%\n  select(ppa03, p03a01)%>%\n  filter(ppa03>=14, p03a01 == \"Si\")%>%\n  group_by(ppa03)%>%\n  summarise(y = n())%>%\n  filter(ppa03 >=30, ppa03 <=54)%>%\n  summarise( y=sum(y)) %>%\n  summarise(x = \"30-54\",y = y / (enei4 %>% select(ppa03, p03a01)%>%\n                                   filter(ppa03 >=30, ppa03 <=54)%>%\n                                   na.omit()%>%\n                                   nrow()) *100)\n  \n  \n\ngrupo3 <- enei4 %>%\n  select(ppa03, p03a01)%>%\n  filter(ppa03>=14, p03a01 == \"Si\")%>%\n  group_by(ppa03)%>%\n  summarise(y = n())%>%\n  filter(ppa03 >=55)%>%\n  summarise( y=sum(y)) %>%\n  summarise(x = \"Mayor a 54\",y = y / (enei4 %>% select(ppa03, p03a01)%>%\n                                   filter(ppa03 >=55)%>%\n                                   na.omit()%>%\n                                   nrow()) *100)\n\ndf03 <- rbind(grupo1,grupo2,grupo3)\n\n########### 4 #################\ntotalXinka <- enei4 %>%\n  select(p03a01,ppa06,ppa03)%>%\n  filter(ppa03 >=14,ppa06 == \"Xinka\") %>%\n  na.omit()%>%\n  nrow()\n\ntotalGarifuna <- enei4 %>%\n  select(p03a01,ppa06,ppa03)%>%\n  filter(ppa03 >=14,ppa06 == \"Garífuna\") %>%\n  na.omit()%>%\n  nrow()\n\ntotalLadino <- enei4 %>%\n  select(p03a01,ppa06,ppa03)%>%\n  filter(ppa03 >=14,ppa06 == \"Ladino\") %>%\n  na.omit()%>%\n  nrow()\n\ntotalExtranjero <- enei4 %>%\n  select(p03a01,ppa06,ppa03)%>%\n  filter(ppa03 >=14,ppa06 == \"Extranjero\") %>%\n  na.omit()%>%\n  nrow()\n\ntotalMaya <- enei4 %>%\n  select(p03a01,ppa06,ppa03)%>%\n  filter(ppa03 >=14,ppa06 == \"Maya\") %>%\n  na.omit()%>%\n  nrow()\n\n\nx = c(totalXinka, totalGarifuna, totalLadino,totalExtranjero,totalMaya)\n\ndf04 <- enei4 %>%\n  select(ppa03,ppa06,p03a01)%>%\n  filter(ppa03 >=14, p03a01 == \"Si\") %>%\n  group_by(ppa06)%>%\n  summarise(conteo = n()) %>%\n  mutate(conteo = conteo/x*100)\n\nnames(df04) <- c(\"x\",\"y\")\n\n\n########### 5 #################\nxinka <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Xinka\", p03a01 == \"Si\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\ntotalXinka <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Xinka\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n  \ngarifuna <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Garífuna\", p03a01 == \"Si\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\ntotalGarifuna <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Garífuna\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\nladino <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Ladino\", p03a01 == \"Si\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\ntotalLadino <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Ladino\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\nextranjero <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Extranjero\", p03a01 == \"Si\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\ntotalExtranjero <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Extranjero\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\nmaya <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Maya\", p03a01 == \"Si\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\ntotalMaya <- enei4 %>%\n  select(p03a01,ppa06,ppa03, ppa02)%>%\n  filter(ppa03 >=14,ppa06 == \"Maya\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\nf1 <- c('Xinka', xinka$conteo/totalXinka$conteo * 100)\nf2 <- c('Garífuna', garifuna$conteo/totalGarifuna$conteo * 100)\nf3 <- c('Ladino', ladino$conteo/totalLadino$conteo * 100)\nf4 <- c('Extranjero', extranjero$conteo/totalExtranjero$conteo * 100)\nf5 <- c('Maya', maya$conteo/totalMaya$conteo * 100)\n\ndf05 <- data.frame(rbind(f1,f2,f3,f4,f5)) \nnames(df05) <- c('x','Hombre','Mujer')\n\n  \n########### 6 #################\ntotalUrbano <- enei4 %>%\n  select(p03a01,area,ppa03)%>%\n  filter(ppa03 >=14, area == \"URBANA\") %>%\n  na.omit()%>%\n  nrow()\n\ntotalRural <- enei4 %>%\n  select(p03a01,area,ppa03)%>%\n  filter(ppa03 >=14, area == \"RURAL\") %>%\n  na.omit()%>%\n  nrow()\n\nx = c(totalUrbano, totalRural)\n\ndf06 <- enei4 %>%\n  select(area,ppa03,p03a01)%>%\n  filter(ppa03 >=14, p03a01 == \"Si\") %>%\n  group_by(area)%>%\n  summarise(conteo = n()) %>%\n  mutate(conteo = conteo/x*100)\n\nnames(df06) <- c(\"x\",\"y\")\n  \n########### 7 #################\nurbana <- enei  %>%\n  select(p03a01,area,ppa03, ppa02)%>%\n  filter(ppa03 >=14,area == \"URBANA\", p03a01 == \"Si\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\ntotalUrbana <- enei4 %>%\n  select(p03a01,area,ppa03, ppa02)%>%\n  filter(ppa03 >=14,area == \"URBANA\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\nrural <- enei4 %>%\n  select(p03a01,area,ppa03, ppa02)%>%\n  filter(ppa03 >=14,area == \"RURAL\", p03a01 == \"Si\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\ntotalRural <- enei4 %>%\n  select(p03a01,area,ppa03, ppa02)%>%\n  filter(ppa03 >=14,area == \"RURAL\") %>%\n  na.omit()%>%\n  group_by(ppa02)%>%\n  summarise(conteo = n())\n\n\n\n\nf1 <- c('Urbano', urbana$conteo/totalUrbana$conteo * 100)\nf2 <- c('Rural', rural$conteo/totalRural$conteo * 100)\n\ndf07 <- data.frame(rbind(f1,f2)) \nnames(df07) <- c('x','Hombre','Mujer')\n\n\n\n\n\n\n\n\n",
    "created" : 1448153833142.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "635318588",
    "id" : "DD98E434",
    "lastKnownWriteTime" : 1448251589,
    "path" : "/mnt/datos/GitHub/unfpa/generacion.R",
    "project_path" : "generacion.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}